# –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –º–∞—Ç—á–µ–π

## üìç –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

**URL –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ –≤—Å–µ–º–∏ –º–∞—Ç—á–∞–º–∏:**
```
https://w54rjjmb.com/sport?lc=1&ss=all
```

–≠—Ç–æ—Ç URL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ API endpoint `/api/w54/live`

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. **–°–ø–∏—Å–æ–∫ –º–∞—Ç—á–µ–π (Snapshot/Snapshot Page)**

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `https://w54rjjmb.com/sport?lc=1&ss=all`

**–ú–µ—Ç–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: **Puppeteer** (–¥–ª—è JavaScript-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞)
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –æ–±—ã—á–Ω—ã–π `fetch` (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `puppeteer=false`)

**–ß—Ç–æ –ø–∞—Ä—Å–∏—Ç—Å—è:**
- **–õ–∏–≥–∏** - –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Ç–∞–±–ª–∏—Ü (`table[class*='LinesGroup_group']`)
- **–ö–æ–º–∞–Ω–¥—ã** - –∏–∑ `div[class*='DefaultLine_teamsWrap']`
- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã 1X2** - –∏–∑ `button[data-outcome-alias]` —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ `1`, `x`, `2`
- **–¢–æ—Ç–∞–ª—ã** - –∏–∑ –∫–Ω–æ–ø–æ–∫ —Å `data-outcome-alias="total_over"` –∏ `"total_under"`
- **–§–æ—Ä—ã** - –∏–∑ –∫–Ω–æ–ø–æ–∫ —Å `data-outcome-alias="fora_one"` –∏ `"fora_two"`
- **Match ID –∏ Line ID** - –∏–∑ `button[data-match-id][data-line-id]`
- **URL –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –∏–∑ `a[class*='DefaultLine_lineLink']` –∏–ª–∏ `a[href^='/line/']`
- **–°—Ç–∞—Ç—É—Å LIVE** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –∫–ª–∞—Å—Å–∞–º `DefaultLine_highlighted`, `DefaultLine_liveLabel`, `DefaultLine_scoreWrap`
- **–°—á–µ—Ç** - –∏–∑ `[class*='DefaultLine_scoreWrap']` –¥–ª—è LIVE –º–∞—Ç—á–µ–π
- **–í—Ä–µ–º—è –º–∞—Ç—á–∞** - –∏–∑ `.auto_center_match_time` –∏ `.auto_center_match_date`

**API Endpoint:** `GET /api/w54/live`
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `url` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫–∞—Å—Ç–æ–º–Ω—ã–π URL –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
  - `puppeteer` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - `false` –∏–ª–∏ `0` –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è Puppeteer

---

### 2. **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞—Ç—á–µ (Detail Page)**

**–ò—Å—Ç–æ—á–Ω–∏–∫:** –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞—Ç—á–∞
```
https://w54rjjmb.com/line/{lineId}/
```

URL –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (`/line/26730210/` –Ω–∞–ø—Ä–∏–º–µ—Ä)

**–ú–µ—Ç–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞:** –¢–æ–ª—å–∫–æ **Puppeteer** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —Ç.–∫. –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript)

**–ß—Ç–æ –ø–∞—Ä—Å–∏—Ç—Å—è:**
- **–í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã** - –≤—Å–µ —Ç–∏–ø—ã —Å—Ç–∞–≤–æ–∫ (1X2, —Ç–æ—Ç–∞–ª—ã, —Ñ–æ—Ä—ã, –∏ –¥—Ä—É–≥–∏–µ)
- **Match ID –∏ Line ID** - –∏–∑ `button[data-match-id]` –∏ `button[data-line-id]`
- **–ö–æ–º–∞–Ω–¥—ã** - –∏–∑ `[class*='TeamInfo_title']` –∏–ª–∏ `[class*='DefaultLine_teamsWrap']`
- **–õ–∏–≥–∞** - –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**API Endpoint:** `GET /api/w54/detail?url={detailUrl}`
- –ü–∞—Ä–∞–º–µ—Ç—Ä `url` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º `/line/...` –∏–ª–∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–º)

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–∞—Ç—á (Match)
```typescript
{
  matchId: string;           // ID –º–∞—Ç—á–∞
  lineId: string;            // ID –ª–∏–Ω–∏–∏
  home: string;              // –î–æ–º–∞—à–Ω—è—è –∫–æ–º–∞–Ω–¥–∞
  away: string;              // –ì–æ—Å—Ç–µ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
  league: string;            // –õ–∏–≥–∞
  detailUrl: string;          // URL –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π)
  startTime?: string;        // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞
  startDate?: string;        // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
  isLive: boolean;           // LIVE –º–∞—Ç—á?
  liveTime?: string;         // –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –º–∞—Ç—á–∞ (–¥–ª—è LIVE)
  livePeriod?: string;       // –ü–µ—Ä–∏–æ–¥ (–¥–ª—è LIVE)
  score?: {                  // –°—á–µ—Ç (–¥–ª—è LIVE)
    home: number;
    away: number;
  };
  outcomes: W54Outcome[];    // –í—Å–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
}
```

### –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç (Outcome)
```typescript
{
  label: string;             // "1", "X", "2", "–¢–æ—Ç–∞–ª –ë", "–¢–æ—Ç–∞–ª –ú", –∏ —Ç.–¥.
  odd: number;               // –ó–Ω–∞—á–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞
  type: "1x2" | "total" | "fora" | "other";
  value?: string;            // –ó–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Ç–æ—Ç–∞–ª–æ–≤/—Ñ–æ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, "2.5")
}
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–í Puppeteer:**
- –û—Ç–∫–ª—é—á–µ–Ω –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞: `page.setCacheEnabled(false)`
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ—Ç–∏–≤ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ —á–µ—Ä–µ–∑ Chrome DevTools Protocol –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
- –î–æ–±–∞–≤–ª–µ–Ω cache-buster –≤ URL: `?_t={timestamp}&_r={random}`

**–í –æ–±—ã—á–Ω–æ–º fetch:**
- –ó–∞–≥–æ–ª–æ–≤–∫–∏: `Cache-Control`, `Pragma`, `Expires`, `If-Modified-Since`, `If-None-Match`
- –ü–∞—Ä–∞–º–µ—Ç—Ä `cache: "no-store"`

### –°–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

**–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
- –¢–∞–±–ª–∏—Ü—ã: `table[class*='LinesGroup_group']`
- –°—Ç—Ä–æ–∫–∏ –º–∞—Ç—á–µ–π: `tr[class*='DefaultLine_line']`
- –ö–æ–º–∞–Ω–¥—ã: `div[class*='DefaultLine_teamsWrap'] > div`
- –ö–Ω–æ–ø–∫–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤: `button[data-outcome-alias][data-odd]`
- –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: `a[class*='DefaultLine_lineLink']` –∏–ª–∏ `a[href^='/line/']`

**–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
- –ö–æ–º–∞–Ω–¥—ã: `[class*='TeamInfo_title']`
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã: `button[data-outcome-alias][data-odd]`
- –ì—Ä—É–ø–ø—ã: `[class*='Group_group']`, `[class*='OutcomesGroups']`

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –ø–∞—Ä—Å–µ—Ä—ã –ª–æ–≥–∏—Ä—É—é—Ç:
- URL –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –º–∞—Ç—á–µ–π
- –ü–µ—Ä–≤—ã–µ 3 –º–∞—Ç—á–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

–õ–æ–≥–∏ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞ (–≥–¥–µ –∑–∞–ø—É—â–µ–Ω `bot/src/index.ts`)

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Puppeteer –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü** - —Å–∞–π—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JavaScript –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
2. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –º–∞—Ç—á–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
3. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –º–µ—Ä—ã –ø—Ä–æ—Ç–∏–≤ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, –Ω–æ –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ URL** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ URL –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ (`/line/...`), –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ
